Amble App

Overview

Amble is a minimal SwiftUI app that displays the number of steps taken in the last minute using Core Motion. It also shows the current motion activity classification (e.g., Walking, Running, Stationary).

Structure

- Amble/Amble/AmbleApp.swift: App entry point. Hosts the root `ContentView`.
- Amble/Amble/ContentView.swift: UI and logic for pedometer and activity tracking (uses `CoreMotion`).
- Amble/Amble/Assets.xcassets: App assets and icon.
- Amble/Amble.xcodeproj: Xcode project configuration (Info keys generated by build settings).

Key Features

- Shows steps counted in the rolling last 60 seconds.
- Displays current activity state using `CMMotionActivityManager`.
- Polls pedometer once per second using `CMPedometer.queryPedometerData(from:to:)` for accurate sliding-window counts.
- Sends a local notification when steps in the last X seconds are 0; X is adjustable in-app (5–600s).

Permissions & Background

- Motion & Fitness permission is required. A usage description is configured via build settings: `NSMotionUsageDescription` → "Motion data is used to count your steps."
- Core Motion pedometer/activity updates can continue in the background on supported devices without additional background modes. No extra background modes are enabled by default.
 - On first launch, the app explicitly triggers the Motion & Fitness permission prompt by issuing a minimal 1s pedometer/activity query when status is `.notDetermined`.

How It Works

- On appear, `ContentView` starts a `PedometerViewModel` that:
  - Starts activity updates if available.
  - Requests notification permission for local alerts.
  - Schedules a 1s timer to query pedometer data from `now - windowSeconds` to `now` and updates `stepsLastMinute`.
  - If steps are 0 for the configured window, posts a local notification (debounced to at most once per window).

Troubleshooting

- If the steps always show 0 or permission warnings appear:
  - Ensure Motion & Fitness is enabled in Settings → Privacy.
  - Test on a physical device (Core Motion is limited in Simulator).

Change Log

- 2025-11-06: Initial implementation of pedometer/activity UI and motion permission description.
- 2025-11-06: Added inactivity window slider and local notification when steps hit 0.


